# CTX-Audit 架构重构说明

## 架构设计

```
ctx-audit/
├── src/                      # 共享前端代码
├── src-tauri/                # 桌面版后端（保留）
├── web-backend/              # Web 版后端（新增）
├── core/                     # 核心共享逻辑（新增）
│   ├── ast/                  # AST 引擎（共享）
│   ├── scanner/              # 扫描器（共享）
│   ├── rules/                # 规则（共享）
│   └── mcp/                  # MCP 服务（共享）
└── docker/                   # Web 版部署配置
```

## 核心原则

1. **前端代码 100% 复用**：通过 API 抽象层实现平台无关
2. **核心逻辑 100% 复用**：AST、扫描器、规则等核心代码独立于平台
3. **最小改动**：仅修改通信层（IPC → HTTP）

## 迁移步骤

1. ✅ 创建 `core/` 目录存放共享的 Rust 代码
2. ✅ 创建 `web-backend/` 目录作为 Web 后端
3. ✅ 将 `src-tauri/src/` 中的核心逻辑迁移到 `core/`
4. ✅ 修改前端，添加 API 抽象层
5. ✅ 更新桌面版和 Web 版的依赖
